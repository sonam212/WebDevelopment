<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Notes App</title>
<style>
  body{font-family:Inter,system-ui,Arial;margin:0;background:#f6f8fb;padding:28px;display:flex;justify-content:center}
  .app{width:100%;max-width:900px;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(16,24,40,0.06);overflow:hidden}
  header{padding:18px 20px;border-bottom:1px solid #eef2ff;display:flex;align-items:center;gap:12px}
  main{display:flex;gap:20px;padding:18px}
  .left{flex:1}
  .right{width:320px;border-left:1px solid #f1f5ff;padding-left:18px}
  textarea,input{width:100%;padding:10px;border-radius:8px;border:1px solid #eef2ff}
  .note{padding:10px;border-radius:8px;border:1px solid #f3f6ff;margin-bottom:10px;background:#fbfdff}
  .note-title{display:flex;justify-content:space-between;align-items:center}
  .muted{color:#6b7280}
  .btn{padding:8px 10px;border-radius:8px;border:none;background:#2563eb;color:#fff;cursor:pointer}
  .small{font-size:0.9rem}
  .list{max-height:56vh;overflow:auto}
  @media (max-width:880px){main{flex-direction:column}.right{width:100%;border-left:none;padding-left:0}}
</style>
</head>
<body>
<div class="app" role="application" aria-label="Notes app">
  <header>
    <h3 style="margin:0">Notes</h3>
    <div class="muted small" style="margin-left:auto">Saved locally in browser</div>
  </header>

  <main>
    <section class="left">
      <div style="display:flex;gap:8px;margin-bottom:12px">
        <input id="title" placeholder="Title" />
        <button id="save" class="btn">Save</button>
      </div>
      <textarea id="content" rows="8" placeholder="Write your note here..."></textarea>

      <h4 style="margin-top:18px;margin-bottom:8px">All Notes</h4>
      <div class="list" id="notesList"></div>
    </section>

    <aside class="right">
      <h4 class="small">Quick actions</h4>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="newNote" class="btn">New</button>
        <button id="clearNotes" class="small">Clear All</button>
      </div>
      <div style="margin-top:18px" class="muted small">Click a note to edit it. Notes are saved to localStorage for persistence.</div>
    </aside>
  </main>
</div>

<script>
(function(){
  const titleEl = document.getElementById('title');
  const contentEl = document.getElementById('content');
  const saveBtn = document.getElementById('save');
  const notesList = document.getElementById('notesList');
  const newNoteBtn = document.getElementById('newNote');
  const clearNotesBtn = document.getElementById('clearNotes');

  let notes = JSON.parse(localStorage.getItem('notes_v1') || '[]');
  let editingId = null;

  function saveStorage(){ localStorage.setItem('notes_v1', JSON.stringify(notes)); }

  function renderList(){
    notesList.innerHTML = '';
    if(notes.length === 0) notesList.innerHTML = '<div class="muted">No notes yet.</div>';
    notes.slice().reverse().forEach(n => {
      const div = document.createElement('div');
      div.className = 'note';
      div.innerHTML = `
        <div class="note-title">
          <strong>${escapeHtml(n.title||'Untitled')}</strong>
          <small class="muted">${new Date(n.id).toLocaleString()}</small>
        </div>
        <div class="small muted" style="margin-top:8px;">${escapeHtml(n.content.slice(0,120))}${n.content.length>120?'...':''}</div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button data-id="${n.id}" class="small btn-edit">Edit</button>
          <button data-id="${n.id}" class="small btn-del" style="background:#ef4444">Delete</button>
        </div>
      `;
      notesList.appendChild(div);
    });
  }

  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

  saveBtn.addEventListener('click', ()=>{
    const title = titleEl.value.trim();
    const content = contentEl.value.trim();
    if(!content){ alert('Note content is empty'); contentEl.focus(); return; }
    if(editingId){
      notes = notes.map(n => n.id === editingId ? {...n, title, content, updated: Date.now()} : n);
      editingId = null;
    } else {
      notes.push({ id: Date.now(), title, content, created: Date.now() });
    }
    saveStorage();
    titleEl.value = ''; contentEl.value = '';
    renderList();
  });

  notesList.addEventListener('click', e=>{
    if(e.target.matches('.btn-edit')){
      const id = Number(e.target.dataset.id);
      const note = notes.find(n=>n.id===id);
      if(!note) return;
      editingId = id;
      titleEl.value = note.title;
      contentEl.value = note.content;
      contentEl.focus();
    } else if(e.target.matches('.btn-del')){
      const id = Number(e.target.dataset.id);
      if(!confirm('Delete note?')) return;
      notes = notes.filter(n=>n.id!==id);
      saveStorage();
      renderList();
    }
  });

  newNoteBtn.addEventListener('click', ()=>{ editingId = null; titleEl.value=''; contentEl.value=''; titleEl.focus(); });
  clearNotesBtn.addEventListener('click', ()=>{
    if(!confirm('Clear all notes?')) return;
    notes = [];
    saveStorage();
    renderList();
  });

  renderList();
})();
</script>
</body>
</html>
